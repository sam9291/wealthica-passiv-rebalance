(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(t,e,n){},15:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),u=(n(13),n(3)),i=n(2),l=n.n(i),s=n(4),m=n(5),f=n(1),p=(n(15),{addon:new(0,window.Addon)}),d=function(t){return p.addon.api.getPositions({groups:t.groupsFilter,institutions:t.institutionsFilter,investments:t.investmentsFilter})},b=function(t){return p.addon.api.getInstitution({groups:t.groupsFilter,institutions:t.institutionsFilter,investments:t.investmentsFilter})},y=function(){return p.addon.request({method:"GET",endpoint:"preferences/addons/passiv/passiv-lite"}).then((function(t){return e=t.data,JSON.parse(atob(e));var e}))},E=function(t){return function(t,e,n){var r=new URL(t);return e&&(r.search=new URLSearchParams(e).toString()),fetch(r.toString(),n).then((function(t){return t.json()}))}("https://getpassiv.com/api/v1/embeddedTrades",void 0,{method:"POST",body:JSON.stringify(t)})},h={margin:8},v=function(t){var e,n=(null===(e=t.positions.find((function(e){return e.security.symbol===t.component.symbol})))||void 0===e?void 0:e.quantity)||0,r=t.actions.find((function(e){return e.symbol===t.component.symbol})),o=0;return r&&(o=r.units,"SELL"===r.action&&(o*=-1)),a.a.createElement("tr",null,a.a.createElement("td",null,t.component.symbol),a.a.createElement("td",null,(null===r||void 0===r?void 0:r.price)||"-"),a.a.createElement("td",null,t.component.percentOfPortfolio),a.a.createElement("td",null,n),a.a.createElement("td",null,o||""),a.a.createElement("td",null,n+o))},O=function(){var t=Object(r.useState)(!1),e=Object(f.a)(t,2),n=e[0],o=e[1],c=Object(r.useState)(!1),i=Object(f.a)(c,2),O=i[0],j=i[1],g=Object(r.useState)(),S=Object(f.a)(g,2),w=S[0],k=S[1],x=Object(r.useState)(),F=Object(f.a)(x,2),P=F[0],N=F[1],T=Object(r.useState)(),q=Object(f.a)(T,2),B=q[0],J=q[1],L=Object(r.useState)([]),C=Object(f.a)(L,2),M=C[0],R=C[1],A=Object(r.useState)([]),I=Object(f.a)(A,2),U=I[0],W=I[1],G=Object(r.useState)([]),Q=Object(f.a)(G,2),$=Q[0],_=Q[1];Object(r.useEffect)((function(){n||(o(!0),p.addon.on("init",(function(t){k(t),console.log("init",t)})),p.addon.on("update",(function(t){k((function(e){return Object(m.a)({},e,{},t)})),console.log("update",t)})))}),[n]),Object(r.useEffect)((function(){(function(){var t=Object(s.a)(l.a.mark((function t(){var e,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=13;break}return t.next=3,d(w);case 3:return e=t.sent,R(e),t.next=7,y();case 7:return n=t.sent,N(n),t.next=11,b(w);case 11:r=t.sent,W(r);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[w]);var z=function(){var t=Object(s.a)(l.a.mark((function t(e){var n,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.keys(U.flatMap((function(t){return t.investments})).map((function(t){return t.currency})).reduce((function(t,e){return Object(m.a)({},t,Object(u.a)({},e,1))}),{})),r=function(t){return{currency:t,amount:U.flatMap((function(e){return e.investments.filter((function(e){return e.currency===t}))})).reduce((function(t,e){return t+e.cash}),0)}},t.next=4,E({buy_only:O,positions:M.map((function(t){return{symbol:t.security.symbol,units:t.quantity}})),targets:e.components.map((function(t){return{percent:t.percentOfPortfolio,symbol:t.symbol}})),balances:n.map((function(t){return r(t)}))});case 4:a=t.sent,_(a),J(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Positions:"),a.a.createElement("ul",null,M.map((function(t){return a.a.createElement("li",null,"".concat(t.security.symbol,": ").concat(t.quantity))}))),a.a.createElement("h1",null,"Targets:"),a.a.createElement("div",null,P&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Buy only"),a.a.createElement("input",{type:"checkbox",checked:O,onClick:function(){return j(!O)}}),P.portfolios.map((function(t){return a.a.createElement("button",{onClick:function(){return z(t)},style:h},t.portfolioName)})))),B&&M&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,B.portfolioName),a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Symbol"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Target"),a.a.createElement("th",null,"Current Quantity"),a.a.createElement("th",null,"Buy/Sell"),a.a.createElement("th",null,"Result")),B.components.map((function(t){return a.a.createElement(v,{component:t,positions:M,actions:$})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,n){t.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.389004f5.chunk.js.map